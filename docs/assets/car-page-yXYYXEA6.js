import{w as N,a as f,b as p,r as h,d as v,j as e,L as k}from"./index-dpfopYKZ.js";import{u as D,a as G,L as I}from"./use-analitics-uHvCga7X.js";import{e as M,L as E}from"./utils-X16NFrqx.js";import{i as H}from"./warehouseImgs-rBBp8cQP.js";const B="_wrapper_14jn5_1",S="_carNumber_14jn5_11",z="_gateNumber_14jn5_23",R="_gateInfo_14jn5_39",V="_info_14jn5_53",q="_row_14jn5_77",F="_rowTitle_14jn5_101",P="_pushButton_14jn5_109",Q="_schema_14jn5_139",$="_schema__text_14jn5_147",A="_schema__img_14jn5_161",U="_schema__point_14jn5_197",J="_linkToTable_14jn5_215",n={wrapper:B,carNumber:S,gateNumber:z,gateInfo:R,info:V,row:q,rowTitle:F,pushButton:P,schema:Q,schema__text:$,schema__img:A,schema__point:U,linkToTable:J},j=(r,s=1)=>{var l;const a=(l=N.find(c=>r.warehouseName.toLowerCase().includes(c.name.toLowerCase())).gates)==null?void 0:l.find(c=>c.from.n<=Number(r.gateName)&&c.to.n>=Number(r.gateName));if(a){const c=(a.from.x+(a.to.x-a.from.x)*(Number(r.gateName)-a.from.n)/(a.to.n-a.from.n)-20)*s,u=(a.from.y+(a.to.y-a.from.y)*(Number(r.gateName)-a.from.n)/(a.to.n-a.from.n)-20)*s;return{x:c,y:u}}else return{x:-100,y:-100}},K=()=>{const{carData:r,setGatesCoordinates:s}=f(p(a=>({carData:a.carData,setGatesCoordinates:a.setGatesCoordinates}))),m=h.useRef(null);return h.useEffect(()=>{const a=()=>{if(r&&m.current){const l=m.current;s(j(r,l.width/393))}};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[r,s]),m},Z=()=>{const{carNumber:r,carData:s,gatesCoordinates:m,setCarNumber:a,setHouseName:l,setCarData:c,setGatesCoordinates:u,setModalType:w,toggleModalVisible:x,fetchCarData:g}=f(p(t=>({carNumber:t.carNumber,carData:t.carData,gatesCoordinates:t.gatesCoordinates,setGatesCoordinates:t.setGatesCoordinates,setCarNumber:t.setCarNumber,setCarData:t.setCarData,setHouseName:t.setHouseName,setModalType:t.setModalType,toggleModalVisible:t.toggleModalVisible,fetchCarData:t.fetchCarData}))),b=K(),{number:d}=v(),{t:i}=D(),C=window.matchMedia("(prefers-color-scheme: dark)").matches,o=H.find(t=>C?t.includes(`${String(s==null?void 0:s.warehouseId)}D`):t.includes(String(s==null?void 0:s.warehouseId))),_=N.find(t=>t.id===(s==null?void 0:s.warehouseId)),T=t=>{const L=t.target;s&&u(j(s,L.width/393))},y=()=>{x(),w("notices")};return h.useEffect(()=>{d&&d!==r&&(c(void 0),a(d)),d&&(g(d),window.scrollTo({top:0}))},[r,g,d,c,a,l]),G(),e.jsx(I,{children:s?e.jsxs("div",{className:n.wrapper,children:[e.jsx("p",{className:n.carNumber,children:M(s.carNumber)}),s.gateName?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:n.gateNumber,children:["â†’ ",i("table-gates")," ",s.gateName]}),e.jsx("p",{className:n.gateInfo,children:i("waiting-time")})]}):e.jsxs("div",{className:n.info,children:[e.jsxs("div",{className:n.row,children:[e.jsx("p",{className:n.rowTitle,children:i("table-gates")}),e.jsx("p",{children:i("not-assigned")})]}),e.jsxs("div",{className:n.row,children:[e.jsx("p",{className:n.rowTitle,children:i("queue-number")}),e.jsx("p",{children:s.carsQuantity!==null&&s.carsQuantity})]}),e.jsx("div",{className:n.row,children:e.jsx("p",{children:i("not-assigned-notice")})}),e.jsx("button",{className:n.pushButton,onClick:y,children:i("get-notice")})]}),e.jsxs("div",{className:n.schema,children:[((o==null?void 0:o.includes("507"))||(o==null?void 0:o.includes("120762"))||(o==null?void 0:o.includes("117986"))||(o==null?void 0:o.includes("208277")))&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:n.schema__text,children:i("where-are-gates")}),e.jsxs("div",{className:n.schema__img,children:[e.jsx("img",{alt:s.carNumber,onLoad:T,ref:b,src:o}),e.jsx("span",{className:n.schema__point,style:{display:m.y===-100?"none":"block",top:m.y,left:m.x}})]})]}),e.jsx(k,{className:n.linkToTable,to:`/${_==null?void 0:_.query}`,children:i("show-all-queue")})]})]}):e.jsx(E,{})})};export{Z as default};
