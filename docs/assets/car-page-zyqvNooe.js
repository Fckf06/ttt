import{w as D,a as w,b as g,r as d,c as v,j as e}from"./index-au8Jr5Ol.js";import{u as L,f as H,a as E,L as G}from"./use-analitics-5mY6GBoN.js";import{e as k,L as M}from"./utils-s_3Q0h1X.js";import{f as B}from"./find-img-n0ZFBaiA.js";const N=(r,a=1)=>{var c;const s=(c=D.find(m=>r.warehouseName.toLowerCase().includes(m.name.toLowerCase())).gates)==null?void 0:c.find(m=>m.from.n<=Number(r.gateName)&&m.to.n>=Number(r.gateName));if(s){const m=(s.from.x+(s.to.x-s.from.x)*(Number(r.gateName)-s.from.n)/(s.to.n-s.from.n)-20)*a,l=(s.from.y+(s.to.y-s.from.y)*(Number(r.gateName)-s.from.n)/(s.to.n-s.from.n)-20)*a;return{x:m,y:l}}else return{x:-100,y:-100}},I=()=>{const{carData:r,setGatesCoordinates:a}=w(g(s=>({carData:s.carData,setGatesCoordinates:s.setGatesCoordinates}))),i=d.useRef(null);return d.useEffect(()=>{const s=()=>{if(r&&i.current){const c=i.current;a(N(r,c.width/393))}};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[r,a]),i},z="_wrapper_pis4w_1",R="_carNumber_pis4w_11",S="_gateNumber_pis4w_23",V="_gateInfo_pis4w_39",q="_info_pis4w_53",P="_row_pis4w_77",Q="_rowTitle_pis4w_101",A="_pushButton_pis4w_109",F="_schema_pis4w_139",W="_schema__text_pis4w_147",J="_schema__img_pis4w_161",K="_schema__point_pis4w_195",O="_linkToTable_pis4w_213",U="_notice_pis4w_231",t={wrapper:z,carNumber:R,gateNumber:S,gateInfo:V,info:q,row:P,rowTitle:Q,pushButton:A,schema:F,schema__text:W,schema__img:J,schema__point:K,linkToTable:O,notice:U},ee=()=>{const{carNumber:r,carData:a,gatesCoordinates:i,setCarNumber:s,setHouseData:c,setHouseName:m,setCarData:l,setGatesCoordinates:_,setModalType:f,toggleModalVisible:x,fetchCarData:h}=w(g(o=>({carNumber:o.carNumber,carData:o.carData,gatesCoordinates:o.gatesCoordinates,setGatesCoordinates:o.setGatesCoordinates,setCarNumber:o.setCarNumber,setCarData:o.setCarData,setHouseName:o.setHouseName,setHouseData:o.setHouseData,setModalType:o.setModalType,toggleModalVisible:o.toggleModalVisible,fetchCarData:o.fetchCarData}))),b=I(),{number:u}=v(),{t:n}=L(),p=H(a),j=p&&B(p),C=o=>{const T=o.target;a&&_(N(a,T.width/393))},y=()=>{x(),f("notices")};return d.useEffect(()=>()=>{_({x:-100,y:-100}),l(void 0),c([])},[l,_,c]),d.useEffect(()=>(u&&u!==r&&(l(void 0),s(u)),u&&(h(u),window.scrollTo({top:0})),()=>window.scrollTo({top:0})),[r,h,u,l,s,c,m]),E(),e.jsx(G,{children:a?e.jsxs("div",{className:t.wrapper,children:[e.jsx("p",{className:t.carNumber,children:k(a.carNumber)}),a.gateName?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:t.gateNumber,children:["â†’ ",n("table-gates")," ",a.gateName]}),e.jsx("p",{className:t.gateInfo,children:n("waiting-time")})]}):e.jsxs("div",{className:t.info,children:[e.jsxs("div",{className:t.row,children:[e.jsx("p",{className:t.rowTitle,children:n("table-gates")}),e.jsx("p",{children:n("not-assigned")})]}),e.jsxs("div",{className:t.row,children:[e.jsx("p",{className:t.rowTitle,children:n("queue-number")}),e.jsx("p",{children:a.carsQuantity!==null&&a.carsQuantity})]}),e.jsx("div",{className:t.row,children:e.jsx("p",{children:n("not-assigned-notice")})}),e.jsx("button",{className:t.pushButton,onClick:y,children:n("get-notice")})]}),e.jsxs("div",{className:t.schema,children:[e.jsx("p",{className:t.schema__text,children:n("where-are-gates")}),e.jsxs("div",{className:t.schema__img,children:[e.jsx("img",{alt:a.carNumber,onLoad:C,ref:b,src:j}),e.jsx("span",{className:t.schema__point,style:{display:i.y===-100?"none":"block",top:i.y,left:i.x}})]}),a.gateName&&e.jsxs("div",{className:t.notice,children:[e.jsx("strong",{children:n("notice-strong")}),n("notice-normal")]})]})]}):e.jsx(M,{})})};export{ee as default};
