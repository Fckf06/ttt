import{a as d,b as m,j as s,L as w,r as h,c as x,w as b}from"./index-W9FukjH8.js";import{u as f,c as v,a as N,L as y}from"./use-analitics-ec0D6StP.js";import{s as H,f as L,L as V}from"./utils-qJgPg78m.js";const z="_content__wrapper_mgjkf_1",k="_column__wrapper_mgjkf_15",E="_column_mgjkf_15",T="_row_mgjkf_61",S="_title__row_mgjkf_71",A="_result__wrapper_mgjkf_107",$="_one_mgjkf_119",D="_result__btn_mgjkf_143",i={content__wrapper:z,column__wrapper:k,column:E,row:T,title__row:S,result__wrapper:A,one:$,result__btn:D},q="_row_1g1zy_1",F="_title__row_1g1zy_13",C="_car__number_1g1zy_29",B="_car__quantity_1g1zy_43",R="_gate__number_1g1zy_57",M="_highlighted_1g1zy_69",O="_gate__notAssigned_1g1zy_79",Q="_tj__notAssigned_1g1zy_79",u={row:q,title__row:F,car__number:C,car__quantity:B,gate__number:R,highlighted:M,gate__notAssigned:O,tj__notAssigned:Q},P=({carData:t})=>{const{searchValue:e}=d(m(r=>({searchValue:r.searchValue}))),{t:o,translation:c}=f(),a=H(t.carNumber,e);return s.jsx(s.Fragment,{children:s.jsx(w,{to:`/${t.carNumber.toLowerCase()}`,children:s.jsxs("div",{className:u.row,children:[s.jsxs("div",{className:u.car__number,children:[t.carsQuantity!==null&&s.jsx("span",{className:u.car__quantity,children:`${t.carsQuantity}.`}),a.map((r,n)=>s.jsxs(h.Fragment,{children:[n===1?s.jsx("span",{className:u.highlighted,children:e}):n>0&&e,r]},n))]}),t.gateName?s.jsxs("div",{className:u.gate__number,children:["â†’ ",t.gateName]}):s.jsx("div",{className:c!=="tj"?u.gate__notAssigned:u.tj__notAssigned,children:o("wait")})]},t.carsQuantity)})})},W=t=>{h.useEffect(()=>{if(t.current){const e=t.current,o=()=>{e&&(e.scrollHeight-e.scrollTop-e.clientHeight<=1&&(e.scrollTop-=2),e.scrollTop===0&&(e.scrollTop+=2))};return e&&e.addEventListener("scroll",o),()=>{e&&e.removeEventListener("scroll",o)}}},[t])},U=()=>{const{focus:t,blur:e,setBlur:o,setHeight:c,setTranslate:a}=d(m(r=>({focus:r.focus,blur:r.blur,setBlur:r.setBlur,setHeight:r.setHeight,setTranslate:r.setTranslate})));h.useEffect(()=>{let r=!1;const n=()=>{r||(r=!0,requestAnimationFrame(()=>{r=!1,window.visualViewport&&window.visualViewport.offsetTop>=0&&(e&&!t?(c("100%"),a(""),o(!1)):c(`${Math.max(0,window.visualViewport.height)}px`),scroll(0,0))}))};return window.visualViewport&&window.visualViewport.offsetTop>=0&&window.visualViewport.addEventListener("resize",n),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",n),c("100%"),a(""))}},[c,a,o,e,t])},G=()=>{const{focus:t}=d(m(e=>({focus:e.focus})));h.useEffect(()=>{var o,c;const e=a=>{a.preventDefault()};return t&&((o=document.querySelector("header"))==null||o.addEventListener("touchmove",e),(c=document.querySelector("#search"))==null||c.addEventListener("touchmove",e)),()=>{var a,r;(a=document.querySelector("header"))==null||a.removeEventListener("touchmove",e),(r=document.querySelector("#search"))==null||r.removeEventListener("touchmove",e)}},[t])},I=()=>{var g;const{t}=f(),e=h.useRef(null),{overflow:o,focus:c,houseData:a,searchValue:r,setOverflow:n}=d(m(l=>({houseData:l.houseData,searchValue:l.searchValue,focus:l.focus,overflow:l.overflow,setOverflow:l.setOverflow}))),_=L(a,r),j=(g=_[0])==null?void 0:g.carNumber.toLowerCase();return h.useEffect(()=>{n("hidden"),setTimeout(()=>{var l;n("auto"),e.current&&((l=e.current)==null||l.scrollTo({top:2}))},0)},[c,r,n]),W(e),U(),G(),s.jsx(s.Fragment,{children:s.jsx("div",{className:i.content__wrapper,children:s.jsx("div",{ref:e,style:{overflow:o},className:i.column__wrapper,children:s.jsxs("div",{onClick:l=>l.stopPropagation(),className:i.column,children:[s.jsxs("div",{className:v(i.title__row,i.row),children:[s.jsx("div",{children:t("table-number")}),s.jsx("div",{children:t("table-gates")})]}),_.map(l=>s.jsx(P,{carData:l},l.carNumber)),_.length===1?s.jsxs("div",{className:c?i.result__wrapper:v(i.result__wrapper,i.one),children:[s.jsx("button",{onMouseDown:l=>l.preventDefault(),className:i.result__btn,children:s.jsx(w,{to:`/${j}`,children:t("search-finded")})}),s.jsx("div",{children:t("search-not-finded")})]}):s.jsx("div",{children:t("search-not-finded")})]})})})})},J="_search__wrapper_7xzb7_1",K="_search__input_7xzb7_33",X="_highlighted_7xzb7_63",Y="_search__info_7xzb7_71",p={search__wrapper:J,search__input:K,highlighted:X,search__info:Y},Z=t=>{const{query:e}=t,{t:o}=f(),{searchValue:c,setSearchValue:a,focusHandler:r,blurHandler:n}=d(m(_=>({searchValue:_.searchValue,focusHandler:_.focusHandler,blurHandler:_.blurHandler,setSearchValue:_.setSearchValue})));return s.jsx(s.Fragment,{children:s.jsxs("div",{id:"search",className:p.search__wrapper,children:[s.jsx("input",{type:"number",placeholder:o("search-field"),inputMode:"numeric",pattern:"[0-9]*",className:p.search__input,value:c,onInput:a,onFocus:r,onBlur:n}),s.jsx("p",{className:p.search__info,children:o("search-notice")}),((e==null?void 0:e.query)==="kl"||(e==null?void 0:e.query)==="el"||(e==null?void 0:e.query)==="kz"||(e==null?void 0:e.query)==="nm")&&s.jsx(w,{className:p.search__link,to:`/${e==null?void 0:e.query}/schema`,children:o("search-question")})]})})},ee="_wrapper_veuw4_1",se={wrapper:ee},oe=()=>{const t=x(),{houseData:e,setHouseName:o,setHouseData:c,fetchHouseData:a}=d(m(n=>({houseData:n.houseData,setHouseName:n.setHouseName,setHouseData:n.setHouseData,fetchHouseData:n.fetchHouseData}))),r=b.find(n=>t.pathname.endsWith(n.query));return h.useEffect(()=>{r&&a(r),window.scrollTo({top:0})},[a,r,c,o]),N(),s.jsx(y,{children:e.length>0?s.jsxs("div",{className:se.wrapper,children:[s.jsx(I,{}),s.jsx(Z,{query:r})]}):s.jsx(V,{})})};export{oe as default};
